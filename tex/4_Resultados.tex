Foram realizados vários experimentos com os 3 modelos apresentados no capítulo anterior e com o \textit{JPEG} com o objetivo de avaliar o potencial de cada um deles nas bases de dados propostas. Os \textit{patches} usados em todos os experimentos realizados neste capítulo possuem 32 pixels de largura e altura. Para os testes em que o conjunto de treino e de teste são a mesma base, foram gerados dois subconjuntos disjuntos: um para treino e um para teste. Este último possui cerca de 10\% do tamanho total e, evidentemente, não faz parte do conjunto de treino. Os resultados do \textbf{JPEG} nas bases de teste utilizadas são apresentados na seção~\ref{res:jpeg} e os resultados dos modelos apresentados no capítulo anterior são apresentados nas seções~\ref{res:mod1}, \ref{res:mod2} e \ref{res:mod3}.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{JPEG}
Nesta seção é apresentado o desempenho obtido pelo \textbf{JPEG} nas bases de teste. 
\label{res:jpeg}
\tabela{Tabela contendo médias obtidas pelo \textbf{JPEG} em cada uma das bases de teste utilizadas}{tab1:jpeg}{|l|l|l|l|l|l|}{\hline
\textbf{Bases}                                                                   & \textbf{BPP} & \textbf{PSNR} & \textbf{SSIM} & \textbf{MSSIM} & \textbf{Quality} \\ \hline
\textbf{\begin{tabular}[c]{@{}l@{}}CLIC Mobile test\\ (patches 32)\end{tabular}} & 8            & 44.23         & 0.98          & 0.99           & 94.06            \\ \hline
\textbf{CLIC Mobile test}                                                        & 2            & 39.58         & 0.96          & 0.99           & 88.69            \\ \hline
\textbf{Kodak}                                                                   & 2            & 36.77         & 0.95          & 0.99           & 85.91            \\ \hline
\textbf{BD0}                                                                     & 8            & 57.85         & 0.99          & 0.99           & 99.18            \\ \hline
\textbf{BD1}                                                                     & 8            & 42.94         & 0.97          & 0.99           & 95.94            \\ \hline
\textbf{BD2}                                                                     & 8            & 32.31         & 0.95          & 0.99           & 83.69            \\ \hline
\textbf{BD3}                                                                     & 8            & 43.84         & 0.96          & 0.99           & 93.94            \\ \hline
\textbf{BD4}                                                                     & 8            & 36.72         & 0.96          & 0.99           & 89.68            \\ \hline}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Modelo 1}
\label{res:mod1}
Primeiramente, o Modelo 1~[\refFig{conv_ae}] foi testado em todas as bases de dados usando \textit{learning rate} fixa durante todo o treinamento e o otimizador \textit{Adam}. Foi utilizada apenas uma época para treino em todos as avaliações realizadas. Os resultados são apresentados na Tabela~\ref{tab:mod1_bd}. Com estes mesmos hiperparâmetros para treino, foram realizados alguns testes na base de teste (nomeada como \textit{test}) do \acrshort{CLIC}~\cite{clic}. Alguns destes testes também usaram, em adição aos conjuntos de treino montados, os conjuntos de treino (\textit{train}) e validação (\textit{valid}) do \acrshort{CLIC}. Os resultados são apresentados na Tabela~\ref{tab:mod1_clic}.

\tabela{Tabela contendo o valor da \acrshort{PSNR}, em decíbeis, dos testes do Modelo 1 com o uso do otimizador \textit{Adam} e \textit{learning rate} fixa. As linhas denotam a base de treino utilizada. As colunas denotam as bases de teste usadas para avaliação do modelo. O índice ``todas'' se refere ao uso de todas as imagens de todas as bases \textbf{BD} para treino}{tab:mod1_bd}{|l|l|l|l|l|l|}{\hline
\textbf{\begin{tabular}[c]{@{}l@{}}Treino (linhas) x \\Teste (colunas)\end{tabular}} & \textbf{BD0}   & \textbf{BD1}   & \textbf{BD2}   & \textbf{BD3}   & \textbf{BD4}   \\ \hline
\textbf{BD0}                                                                          & 49.66          & 38.07          & 26.34          & 38.05          & 31.13          \\ \hline
\textbf{BD1}                                                                          & 47.57          & 44.08          & 34.54          & 42.66          & 38.69          \\ \hline
\textbf{BD2}                                                                          & \textbf{53.69} & \textbf{51.16} & \textbf{44.07} & \textbf{50.06} & \textbf{47.14} \\ \hline
\textbf{BD3}                                                                          & 50.62          & 47.88          & 39.76          & 46.59          & 43.25          \\ \hline
\textbf{BD4}                                                                          & 47.30          & 46.98          & 41.10          & 45.63          & 43.75          \\ \hline
\textbf{Todas}                                                                        & 46.77          & 46.35          & 43.94          & 45.88          & 45.08          \\ \hline}
\tabela{Tabela contendo o valor da \acrshort{PSNR}, em decíbeis, dos testes do Modelo 1 com o uso do otimizador \textit{Adam} e \textit{learning rate} fixa. As linhas denotam a base de treino utilizada. As colunas denotam as bases de teste usadas para avaliação do modelo. O índice ``todas'' se refere ao uso de todas as imagens de todas as bases \textbf{BD} para treino. O uso de $x+y$ denota o uso de todas as imagens do conjunto $x$ e do conjunto $y$ para treinamento}{tab:mod1_clic}{|l|l|}{
\hline
\textbf{Treino (linhas) x Teste (coluna)}                                                              & \textbf{\acrshort{CLIC} Mobile test} \\ \hline
\textbf{BD0}                                                                                            & 34.77                    \\ \hline
\textbf{BD1}                                                                                            & 44.11                    \\ \hline
\textbf{BD2}                                                                                            & 48.97                   \\ \hline
\textbf{BD3}                                                                                            & 45.34                   \\ \hline
\textbf{BD4}                                                                                            & 42.42                    \\ \hline
\textbf{Todas}                                                                                          & 51.27                     \\ \hline
\textbf{Todas + CLIC Mobile train}                                                                      & \textbf{55.78}            \\ \hline
\textbf{\begin{tabular}[c]{@{}l@{}}Todas + Clic Mobile train + \\ Clic Professional train\end{tabular}} & 47.26                    \\ \hline
\textbf{CLIC Mobile Train}                                                                              & 46.63                   \\ \hline
}
É interessante notar que o \textbf{BD2} é a melhor base de dados para treino, o que reforça os resultados encontrados por \textit{Toderici} em~\cite{toderici2017full}. Outro resultado interessante obtido ocorre ao treinar na base de dados com menor entropia e testar na base com maior entropia. Pode-se notar que foi muito maléfico para a aprendizagem da rede treinar somente com exemplos fáceis para testar em exemplos difíceis. Posteriormente foram realizados alguns testes usando o método de atualização de \textit{learning rate} explicado no capítulo anterior. A política utilizada foi a exp\_range, pois foi a que obteve melhores resultados. Após a realização de vários testes, foi possível aumentar os \acrshort{dB} obtidos anteriormente de 44.08 e 44.07 ao treinar e testar no BD0 e BD1 para 50.81 e 47.83, respectivamente. Considerando que todos esses treinamentos referentes aos resultados apresentados nas~\refTabs{tab:mod1_bd}{tab:mod1_clic} foram executados utilizando uma única época, esta melhora pode ser considerada como a ``superconvergência'' apontada em~\cite{smith2017cyclical}. É interessante notar que, ao contrário do que foi observado por \textit{Leslie} neste artigo, o uso do otimizador \textit{Adam} com a exp\_range apresentou melhoras significativas para o Modelo 1.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Modelo 2}
\label{res:mod2}
Para o Modelo 2~[\refFig{conv_ae_bin}], foram feitos testes nas bases \textbf{\acrshort{CLIC} Mobile}, \textbf{BD1} e \textbf{BD2}. Os resultados são apresentados na \refTab{tab1:mod2}. Conforme esperado, dentre as bases \textbf{BD1} e \textbf{BD2}, os piores resultados do \textit{JPEG} e do \textit{autoencoder} foram encontrados no \textbf{BD2} que é o com maior entropia (\acrshort{PNG} teve mais dificuldade para comprimir). Nota-se que a menor diferença proporcional entre o resultado do modelo e do \textit{JPEG} na métrica \acrshort{PSNR} se dá no \textbf{BD2}, o que reforça a observação feita em~\cite{toderici2015variable} de que em baixas taxas e resoluções espaciais, os artefatos blocantes do \textit{JPEG} (ruído causado pela perda de informação) se tornam mais comuns. Na~\refFig{patch} é mostrado um \textit{patch} reconstruído que obteve 36.69 \acrshort{dB} de \textit{PSNR}.
\tabela{Tabela contendo os resultados do Modelo 2 para as métricas visuais \acrshort{PSNR}, \acrshort{SSIM} e \acrshort{MS-SSIM} a uma taxa nominal de 8 bits por pixel}{tab1:mod2}{|l|l|l|l|l|l|}{\hline
\textbf{\begin{tabular}[c]{@{}l@{}}Bases de Treino e\\ Teste\end{tabular}} & \textbf{BPP} & \textbf{PSNR} & \textbf{SSIM} & \textbf{MS-SSIM} & \textbf{Épocas} \\ \hline
\textbf{CLIC Mobile test}                                                       & 8            & 35.03         & 0.94          & 0.98           & 30              \\ \hline
\textbf{BD1}                                                               & 8            & 35.26         & 0.93          & 0.98           & 30              \\ \hline
\textbf{BD2}                                                               & 8            & 29.10         & 0.95          & 0.98           & 30              \\ \hline}
\figura[!htb]{patch}{Imagem original (esquerda) e \textit{patch} reconstruído pelo Modelo 2 (direita)}{patch}{width=\textwidth}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Modelo 3}
\label{res:mod3}
Para o Modelo 3~[\refFig{toderici_model}], foram feitos testes nas bases \textbf{\acrshort{CLIC} Mobile}, \textbf{BD0}, \textbf{BD1}, \textbf{BD2}, \textbf{BD3}, \textbf{BD4} e \textbf{Kodak}. Os resultados são apresentados na~\refTab{tab:mod3}. Uma comparação com o \textit{JPEG} para diferentes taxas e métricas de distorção é apresentada na~\refFigs{plots_psnr}{plots_ssim}.

\tabela{Tabela contendo os resultados do Modelo 3}{tab:mod3}{|l|l|l|l|l|}{\hline
\textbf{Bases}                                                                   & \textbf{BPP} & \textbf{PSNR} & \textbf{SSIM} & \textbf{MS-SSIM} \\ \hline
\textbf{\begin{tabular}[c]{@{}l@{}}CLIC Mobile test\\ (patches 32)\end{tabular}} & 2            & 33.75         & 0.92          & 0.97            \\ \hline
\textbf{\begin{tabular}[c]{@{}l@{}}Kodak\\ (patches 32)\end{tabular}}            & 2            & 31.46         & 0.88          & 0.96            \\ \hline
\textbf{BD0}                                                                     & 2            & 40.24         & 0.97          & 0.99            \\ \hline
\textbf{BD1}                                                                     & 2            & 35.00         & 0.91          & 0.98            \\ \hline
\textbf{BD2}                                                                     & 2            & 27.53         & 0.91          & 0.97            \\ \hline
\textbf{BD3}                                                                     & 2            & 33.27         & 0.91          & 0.97            \\ \hline
\textbf{BD4}                                                                     & 2            & 30.16         & 0.90          & 0.97            \\ \hline}

\figura[!htb]{plots_ssim}{Comparação do Modelo 3 com o JPEG na métrica \acrshort{PSNR} à diferentes taxas}{plots_ssim}{width=\textwidth}
\figura[!htb]{plots_psnr}{Comparação do Modelo 3 com o JPEG na métrica \acrshort{SSIM} à diferentes taxas}{plots_psnr}{width=\textwidth}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

